<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
  <head>
    <title>TufteGraph: Integration tests</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script type="text/javascript" src="../jquery.enumerable.js"></script>
    <script type="text/javascript" src="../jquery.tufte-graph.js"></script>
    <link rel="stylesheet" href="../tufte-graph.css" type="text/css" media="screen" charset="utf-8" />

    <style>
      body { font-family: georgia; font-size 14px; }
      .test-case { float: left; text-align: center; margin-right: 50px;}
      a, a:visited { color: black; }
      h2 { font-size: 1.2em; clear: both;}
    </style>

    <script type="text/javascript">
      $(document).ready(function () {
        commonTestData = [
          [1.0, {label: 'A'}],
          [1.3, {label: 'B'}],
          [3.6, {label: 'C'}],
          [4.0, {label: 'D'}],
          [5.2, {label: 'E'}],
          [7.0, {label: 'F', color: '#FFBE33'}]
        ]

        jQuery('#defaults-graph').tufteBar({
          data: commonTestData 
        });

        jQuery('#static-properties-graph').tufteBar({
          data: commonTestData,
          barWidth: 0.8,
          barLabel:  'Y',
          axisLabel: 'X', 
          color:     '#aa0000'
        });

        jQuery('#dynamic-properties-graph').tufteBar({
          data: commonTestData,
          barWidth:  function(e, i) { return 0.5 + (i % 2) * 0.2 },
          barLabel:  function(e, i) { return e[0] },
          axisLabel: function(e, i) { return e[1].label }, 
          color:     function(e, i) { 
            return e[1].color || ['#E57536', '#82293B'][i % 2] 
          }
        });

        stackedTestData = [
          [[2.0, 1.0, 0.6], {label: 'A'}],
          [[2.4, 0.9, 2.0], {label: 'B'}],
          [[1.5, 2.6, 0.4], {label: 'C', colors: $.fn.tufteBar.defaults.colors}]
        ]

        jQuery('#stacked-defaults-graph').tufteBar({
          data: [
            [[2.0, 1.0, 0.6]],
            [[2.4, 0.9, 2.0]],
            [[1.5, 2.6, 0.4]]
          ]
        });

        jQuery('#stacked-dynamic-graph').tufteBar({
          data: stackedTestData,
          barWidth:  function(e, i) { return 0.5 + (i % 2) * 0.2 },
          barLabel:  function(e, i) { return e[0].sum() },
          axisLabel: function(e, i) { return e[1].label }, 
          color:     function(e, i, stackedIndex) { 
            return (e[1].colors || ['#82293B', '#E57536', '#FFBE33'])[stackedIndex % 3] 
          }
        });

        jQuery('#legend-defaults-graph').tufteBar({
          data: stackedTestData,
          legend: {
            data: ["A", "B", "C"]
          }
        });

        jQuery('#legend-dynamic-graph').tufteBar({
          data: stackedTestData,
          legend: {
            data: ["A", "B", "C"],
            label: function(e, i) { return e + i },
            color: function(e, i) { 
              return ['#82293B', '#E57536', '#FFBE33'][i % 3] 
            }
          }
        });

        jQuery('#legend-colors-graph').tufteBar({
          data: stackedTestData,
          colors: ['#82293B', '#E57536', '#FFBE33'],
          legend: {
            data: ["A", "B", "C"]
          }
        });
      });
    </script>
  </head>
  <body>
    <a href="../index.html"><h1>TufteGraph: Integration Tests</h1></a>
    <h2>Bar</h2>
    <div class='test-case'>
      <h3>Default</h3>
      <div id='defaults-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <div class='test-case'>
      <h3>Static properties</h3>
      <div id='static-properties-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <div class='test-case'>
      <h3>Dynamic properties</h3>
      <div id='dynamic-properties-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <h2>Stacked Bar</h2>
    <div class='test-case'>
      <h3>Default</h3>
      <div id='stacked-defaults-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <div class='test-case'>
      <h3>Dynamic</h3>
      <div id='stacked-dynamic-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <h2>Legends</h2>
    <div class='test-case'>
      <h3>Default</h3>
      <div id='legend-defaults-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <div class='test-case'>
      <h3>Dynamic</h3>
      <div id='legend-dynamic-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
    <div class='test-case'>
      <h3>Use graph colors</h3>
      <div id='legend-colors-graph' class='graph' style='width:200px; height: 150px'></div>
    </div>
  </body>
</html>  
